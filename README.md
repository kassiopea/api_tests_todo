# Проект для api тестов

Проект был создан для примера создания и запуска api тестов

## О проекте
Приложение представляет собой rest api.

Написано с использованием:
- python
- flask

Базы данных:
- mongodb
- redis

Созданы две ветки, в которых реализовано тестирование API данного приложения:
- dev_local - содержит все файлы для запуска приложения локально без использования докера, 
с настройками для allure
- dev_docker_tests содержит файлы для запуска в докер контейнере, 
с возможностью запускать тесты, как внутри контейнера, так и извне

Инструкции по запуску приложения и тестов для каждой ветки находятся в readme этих веток

## Структура тестов

В структуру не включено содержимое директории с приложением.

```
tests_api
│   __init__.py
│   conftest.py
│   constants.py
│   messages.py
│   test_todo.py
|
└───allure_reports (only dev_local)
|   |   environment.properties
|
└───data
│   │   description_valid.py
│   │   generate_auth_data.py
│   │   generate_todo_data.py
│   │   messages.py
│   │   todo_schema.py
│       
└───fixtures
│   │   __init__.py
│   │   auth.py
│   │   todo.py
│   
└───models
│   │   __init__.py
│   │   project.py
│   │   todo.py
│   │   user.py

```

- mongo - директория для скриптов для БД
    - mongo-init.js - скрипт для наполнения бд данными перед стартом тестов
- tests - директория со всеми тестами
    - tests_api - директория с api тестами
        - allure_reports (только в dev_local) - директораия для отчетов allure
            - environment.properties - файл с настройками для allure
        - data - директория для данных
            - description_valid.py для параметризации тестирования поля "Описание"
            - generate_auth_data.py генерация валидных и невалидных данных для авторизации
            - generate_todo_data.py генерация данных для todo
            - messages.py содержит все тексты сообщений
            - todo_schema.py - схема для валидации ответа на запрос создания todo
        - models - директория с объектами для тестов
            - project.py - файл с объектом проекта
            - todo.py - файл с объектом todo
            - user.py - файл с объектом пользователя дла авторизации
        - conftest.py - файл с фикстурами для запуска api тестов
        - constants.py - файл с необходимыми url
        - test_todo.py - файл с тестами на методы todo
- todo_list_api - директория с бекенд api приложения (реализованные методы можно посмотреть в wiki)
- .dockerignore для исключений докера (только в ветке dev_docker_tests)
- .env подобные файлы с окружением не рекомендуется загружать в публичный доступ (лежит только для примера)
- .flaskenv содержит данные об окружении и имени проекта
- .travis.yml файл с настройками для запуска тестов с помощью Travis CI 
    - В ветке dev_docker_tests реализован один из подходов запуска тестов внутри контейнера с приложением
    - В ветке dev_local запускается flake8
- Dockerfile с шагами для запуска образа с приложением (только для ветки dev_docker_tests)
- docker-compose.yml запускает образы с приложением и базами данных (только для ветки dev_docker_tests)
- requirements.txt файл с зависимостями
- run.py - инициализация приложения с указанием файла окружения